<!DOCTYPE html><html lang="pt-br"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Monte seu Kimono | Fight Lab</title><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700;800&display=swap" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"><script>(function(h,o,t,j,a,r){h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};h._hjSettings={hjid:6502973,hjsv:6};a=o.getElementsByTagName('head')[0];r=o.createElement('script');r.async=1;r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;a.appendChild(r);})(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');</script><style>:root{--bg-color:#0a0a0a;--primary-color:#b3152f;--secondary-color:#111111;--text-color:#f0f0f0}*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Montserrat',system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,'Helvetica Neue',Arial,'Noto Sans','Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol','Noto Color Emoji';background:var(--bg-color);color:var(--text-color)}.builder-container{max-width:1200px;margin:0 auto;padding:24px 16px;display:grid;grid-template-columns:1fr 320px;gap:16px}@media(max-width:992px){.builder-container{grid-template-columns:1fr}.panel{order:2}.viewer{order:1}}.viewer{background:var(--secondary-color);border:1px solid #1b1b1b;border-radius:10px;position:relative;min-height:520px;overflow:hidden}.viewer .hud{position:absolute;inset:0;pointer-events:none;display:flex;align-items:flex-end;justify-content:space-between;padding:10px;background:linear-gradient(180deg,rgba(0,0,0,0) 60%,rgba(0,0,0,.45) 100%)}.viewer .hud .hint{font-size:12px;opacity:.8}.viewer .hud .toolbar{display:flex;gap:8px}.btn{background:#161616;color:#fff;border:1px solid #2a2a2a;border-radius:8px;padding:10px 12px;font-weight:600;cursor:pointer;transition:.2s}.btn[aria-pressed="true"],.btn:hover{border-color:var(--primary-color)}.chip{padding:6px 10px;font-size:12px;border-radius:999px;border:1px solid #2a2a2a;background:#0f0f0f}.panel{background:var(--secondary-color);border:1px solid #1b1b1b;border-radius:10px;padding:14px;display:flex;flex-direction:column;gap:14px}.group{display:grid;gap:8px}.group h3{font-size:14px;letter-spacing:.3px;font-weight:700}.swatches{display:grid;grid-template-columns:repeat(6,1fr);gap:8px}.swatch{width:36px;height:36px;border-radius:8px;border:2px solid transparent;cursor:pointer}.swatch[aria-checked="true"]{outline:2px solid var(--primary-color)}.swatch[data-color]{box-shadow:inset 0 0 0 1px rgba(255,255,255,.06)}.legend{display:flex;align-items:center;gap:8px;font-size:12px;opacity:.9}.legend .dot{width:10px;height:10px;border-radius:999px;display:inline-block}.divider{height:1px;background:#1b1b1b;margin:6px 0}.row{display:flex;gap:8px;flex-wrap:wrap}.select{width:100%;padding:10px;border-radius:8px;background:#0f0f0f;color:#fff;border:1px solid #2a2a2a}#stage{position:absolute;inset:0;width:100%;height:100%;display:block}</style><script src="https://unpkg.com/three@0.158.0/build/three.min.js"></script><script src="https://unpkg.com/three@0.158.0/examples/js/controls/OrbitControls.js"></script></head><body><div class="builder-container"><section class="viewer" aria-label="Visualização 3D do Kimono"><canvas id="stage" aria-label="Canvas 3D" role="img"></canvas><div class="hud"><span class="hint">Arraste para girar • Scroll para zoom • Shift+arraste para mover</span><div class="toolbar" aria-label="Ferramentas de visualização"><button class="btn" id="btnReset" title="Resetar visão"><i class="fa fa-rotate-left"></i></button><span class="chip" id="dimTag">Iluminação: Studio</span></div></div></section><aside class="panel" aria-label="Opções do configurador"><div class="group"><h3>Tecido</h3><div class="row"><button class="btn" data-fabric="pearl" aria-pressed="true">Pearl Weave</button><button class="btn" data-fabric="gold">Gold Weave</button><button class="btn" data-fabric="ripstop">Ripstop</button></div><div class="legend"><span class="dot" style="background:#777"></span><span>Textura visual simula tecido escolhido</span></div></div><div class="divider"></div><div class="group"><h3>Cores</h3><div class="legend"><span class="dot" style="background:#b3152f"></span><span>Ao vivo no 3D</span></div><div class="swatches" id="swatchesBase" role="listbox" aria-label="Cor do kimono"></div><div class="row"><select class="select" id="accentPart"><option value="stitch">Costura</option><option value="lapel">Gola/Lapel</option><option value="belt">Faixa</option></select></div><div class="swatches" id="swatchesAccent" role="listbox" aria-label="Cor de detalhes"></div></div><div class="divider"></div><div class="group"><h3>Patches</h3><div class="row"><button class="btn" data-patch="shoulder" aria-pressed="true">Ombro</button><button class="btn" data-patch="chest">Peito</button><button class="btn" data-patch="back">Costas</button></div><div class="row"><button class="btn" id="togglePatch">Alternar Patch</button></div></div><div class="divider"></div><div class="group"><h3>Exportar</h3><div class="row"><button class="btn" id="btnSnapshot"><i class="fa fa-camera"></i> Snapshot</button></div></div></aside></div><script>const COLORS_BASE=['#ffffff','#0c0c0c','#1d1d1d','#1b2a57','#153b3b','#122b1f','#5a1b1b','#b3152f','#8c6b2a','#28323f'];const COLORS_ACCENT=['#b3152f','#f5f5f5','#ffcc00','#2ecc71','#3498db','#9b59b6','#e67e22','#e74c3c','#95a5a6','#111111'];const state={fabric:'pearl',colors:{base:'#ffffff',stitch:'#b3152f',lapel:'#111111',belt:'#111111'},patchZone:'shoulder',patchVisible:true};const qs=(s,el=document)=>el.querySelector(s);const qsa=(s,el=document)=>[...el.querySelectorAll(s)];function buildSwatches(container,list,current){container.innerHTML='';list.forEach(c=>{const b=document.createElement('button');b.className='swatch';b.style.background=c;b.setAttribute('role','option');b.dataset.color=c;if(c.toLowerCase()===current.toLowerCase())b.setAttribute('aria-checked','true');b.addEventListener('click',()=>{qsa('.swatch[aria-checked="true"]').forEach(x=>x.removeAttribute('aria-checked'));b.setAttribute('aria-checked','true');onColorPick(c,container.id==='swatchesBase'?'base':qs('#accentPart').value);});container.appendChild(b);});}buildSwatches(qs('#swatchesBase'),COLORS_BASE,state.colors.base);buildSwatches(qs('#swatchesAccent'),COLORS_ACCENT,state.colors.stitch);qsa('[data-fabric]').forEach(btn=>{btn.addEventListener('click',()=>{qsa('[data-fabric]').forEach(b=>b.setAttribute('aria-pressed','false'));btn.setAttribute('aria-pressed','true');state.fabric=btn.dataset.fabric;applyFabric();});});qsa('[data-patch]').forEach(btn=>{btn.addEventListener('click',()=>{qsa('[data-patch]').forEach(b=>b.setAttribute('aria-pressed','false'));btn.setAttribute('aria-pressed','true');state.patchZone=btn.dataset.patch;applyPatchZone();});});qs('#togglePatch').addEventListener('click',()=>{state.patchVisible=!state.patchVisible;applyPatchVisibility();});let renderer,scene,camera,controls,kimono,lights={};function init3D(){const canvas=qs('#stage');renderer=new THREE.WebGLRenderer({canvas,antialias:true,preserveDrawingBuffer:true});renderer.setPixelRatio(Math.min(window.devicePixelRatio,2));scene=new THREE.Scene();scene.background=new THREE.Color(0x0a0a0a);camera=new THREE.PerspectiveCamera(45,1,0.1,100);camera.position.set(0.8,1.4,2.2);scene.add(camera);controls=new THREE.OrbitControls(camera,canvas);controls.enableDamping=true;controls.enablePan=true;controls.minDistance=0.8;controls.maxDistance=4;controls.target.set(0,1,0);lights.key=new THREE.DirectionalLight(0xffffff,1.2);lights.key.position.set(2,3,2);scene.add(lights.key);lights.fill=new THREE.DirectionalLight(0xffffff,0.6);lights.fill.position.set(-2,1,1);scene.add(lights.fill);lights.rim=new THREE.DirectionalLight(0xffffff,0.5);lights.rim.position.set(0,2,-2);scene.add(lights.rim);scene.add(new THREE.AmbientLight(0xffffff,0.35));const grid=new THREE.GridHelper(10,20,0x1b1b1b,0x161616);grid.position.y=0;scene.add(grid);kimono=buildKimono();scene.add(kimono);qs('#btnReset').addEventListener('click',()=>{camera.position.set(0.8,1.4,2.2);controls.target.set(0,1,0);controls.update();});window.addEventListener('resize',resize);resize();animate();}function resize(){const c=qs('#stage');const rect=c.getBoundingClientRect();const w=rect.width||c.clientWidth;const h=rect.height||c.clientHeight||520;if(!camera||!renderer)return;camera.aspect=w/h;camera.updateProjectionMatrix();renderer.setSize(w,h,false);}function animate(){requestAnimationFrame(animate);controls&&controls.update();renderer&&renderer.render(scene,camera);}function buildKimono(){const g=new THREE.Group();const baseMat=new THREE.MeshPhysicalMaterial({color:new THREE.Color(state.colors.base),roughness:0.9,metalness:0,clearcoat:0.1});const torso=new THREE.Mesh(new THREE.BoxGeometry(0.8,1.0,0.3),baseMat);torso.position.set(0,1.05,0);const sleeveGeo=new THREE.CylinderGeometry(0.18,0.18,0.8,24,1,true);const sleeveL=new THREE.Mesh(sleeveGeo,baseMat);sleeveL.rotation.z=Math.PI/2;sleeveL.position.set(-0.65,1.05,0);const sleeveR=sleeveL.clone();sleeveR.position.x=0.65;const lapelMat=new THREE.MeshStandardMaterial({color:new THREE.Color(state.colors.lapel),roughness:0.8,metalness:0});const lapel=new THREE.Mesh(new THREE.BoxGeometry(0.12,1.0,0.05),lapelMat);lapel.position.set(0.06,1.05,0.16);const lapel2=lapel.clone();lapel2.position.set(-0.06,1.05,0.16);const beltMat=new THREE.MeshStandardMaterial({color:new THREE.Color(state.colors.belt),roughness:0.7});const belt=new THREE.Mesh(new THREE.BoxGeometry(0.9,0.08,0.2),beltMat);belt.position.set(0,0.65,0.05);const stitchMat=new THREE.LineBasicMaterial({color:new THREE.Color(state.colors.stitch)});const stitchGeo=new THREE.BufferGeometry().setFromPoints([new THREE.Vector3(-0.35,1.55,0.16),new THREE.Vector3(0.35,1.55,0.16)]);const stitch=new THREE.Line(stitchGeo,stitchMat);const patchTex=makeFabricTexture('pearl');const patchMat=new THREE.MeshStandardMaterial({map:patchTex,transparent:true,opacity:state.patchVisible?1:0});const patchPlane=new THREE.PlaneGeometry(0.25,0.12);const patch=new THREE.Mesh(patchPlane,patchMat);patch.position.set(-0.28,1.25,0.17);patch.name='patch';g.add(torso,sleeveL,sleeveR,lapel,lapel2,belt,stitch,patch);g.userData={materials:{base:baseMat,lapel:lapelMat,belt:beltMat,stitch:stitchMat,patch:patchMat},parts:{patch}};return g;}function makeFabricTexture(kind){const size=256;const cvs=document.createElement('canvas');cvs.width=cvs.height=size;const ctx=cvs.getContext('2d');ctx.fillStyle='#222';ctx.fillRect(0,0,size,size);const noise=ctx.createImageData(size,size);for(let i=0;i<noise.data.length;i+=4){const n=kind==='ripstop'?(Math.random()*200+30):(kind==='gold'?(Math.random()*100+80):(Math.random()*60+120));noise.data[i]=noise.data[i+1]=noise.data[i+2]=n;noise.data[i+3]=255;}ctx.putImageData(noise,0,0);if(kind==='ripstop'){ctx.strokeStyle='rgba(255,255,255,0.05)';ctx.lineWidth=1;for(let x=0;x<size;x+=16){ctx.beginPath();ctx.moveTo(x,0);ctx.lineTo(x,size);ctx.stroke();}for(let y=0;y<size;y+=16){ctx.beginPath();ctx.moveTo(0,y);ctx.lineTo(size,y);ctx.stroke();}}if(kind==='gold'){ctx.globalCompositeOperation='overlay';ctx.fillStyle='rgba(255,215,0,0.06)';ctx.fillRect(0,0,size,size);ctx.globalCompositeOperation='source-over';}const tex=new THREE.CanvasTexture(cvs);tex.wrapS=tex.wrapT=THREE.RepeatWrapping;tex.repeat.set(6,6);tex.anisotropy=4;tex.needsUpdate=true;return tex;}function applyFabric(){const m=kimono.userData.materials;const tex=makeFabricTexture(state.fabric);m.base.map=tex;m.base.needsUpdate=true;m.patch.map=tex;m.patch.needsUpdate=true;}function onColorPick(hex,part){state.colors[part]=hex;const m=kimono.userData.materials;switch(part){case 'base':m.base.color.set(hex);break;case 'lapel':m.lapel.color.set(hex);break;case 'belt':m.belt.color.set(hex);break;case 'stitch':m.stitch.color.set(hex);break;}}function applyPatchZone(){const p=kimono.userData.parts.patch;const zone=state.patchZone;if(zone==='shoulder'){p.position.set(-0.28,1.25,0.17);p.rotation.set(0,0,0);}else if(zone==='chest'){p.position.set(0.22,1.1,0.17);p.rotation.set(0,0,0);}else{p.position.set(0,1.4,-0.16);p.rotation.set(0,Math.PI,0);}}function applyPatchVisibility(){const m=kimono.userData.materials.patch;m.opacity=state.patchVisible?1:0;m.transparent
